<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genesys Widget Debug</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        
        .debug-panel {
            background: #000;
            color: #0f0;
            font-family: monospace;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .error {
            color: #f00;
        }
        
        .success {
            color: #0f0;
        }
        
        .info {
            color: #ff0;
        }
        
        #genesys-support-center {
            min-height: 500px;
            border: 2px dashed #ccc;
            background: white;
            border-radius: 8px;
            padding: 20px;
        }
        
        .placeholder {
            text-align: center;
            color: #666;
            padding: 100px 20px;
        }
        
        .test-buttons {
            margin: 20px 0;
        }
        
        .test-buttons button {
            background: #1e5ba8;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        /* Genesys Widget Styling - Complete Clearwave Fiber Style */
        #genesys-support-center {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            background-color: #f5f7fa !important;
        }

        /* Hero section with blue background - matches Clearwave exactly */
        #genesys-support-center [class*="hero"],
        #genesys-support-center [class*="header"],
        #genesys-support-center [class*="banner"],
        #genesys-support-center > div:first-child {
            background: linear-gradient(135deg, #1e5ba8 0%, #2980b9 100%) !important;
            color: white !important;
            padding: 80px 20px !important;
            text-align: center !important;
        }

        /* Welcome title styling */
        #genesys-support-center h1,
        #genesys-support-center [class*="title"],
        #genesys-support-center [class*="heading"] {
            color: white !important;
            font-size: 48px !important;
            font-weight: 300 !important;
            margin-bottom: 30px !important;
            text-align: center !important;
            line-height: 1.2 !important;
        }

        /* Search input styling - rounded like Clearwave */
        #genesys-support-center input[type="text"],
        #genesys-support-center input[type="search"],
        #genesys-support-center [class*="search"] input {
            width: 100% !important;
            max-width: 500px !important;
            padding: 15px 20px !important;
            border: none !important;
            border-radius: 25px !important;
            font-size: 16px !important;
            background: white !important;
            margin: 0 auto !important;
            display: block !important;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1) !important;
            outline: none !important;
        }

        /* Search container */
        #genesys-support-center [class*="search-container"],
        #genesys-support-center [class*="search-wrapper"] {
            max-width: 500px !important;
            margin: 0 auto !important;
            position: relative !important;
        }

        /* Category cards grid layout */
        #genesys-support-center [class*="grid"],
        #genesys-support-center [class*="category"],
        #genesys-support-center [class*="card-container"] {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
            gap: 20px !important;
            padding: 60px 20px !important;
            max-width: 1200px !important;
            margin: 0 auto !important;
            background-color: #f5f7fa !important;
        }

        /* Individual category cards - exactly like Clearwave */
        #genesys-support-center [class*="card"]:not([class*="container"]) {
            background: white !important;
            padding: 30px 20px !important;
            border-radius: 8px !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05) !important;
            border: 1px solid #e1e5e9 !important;
            text-align: center !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
        }

        #genesys-support-center [class*="card"]:hover {
            transform: translateY(-5px) !important;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;
        }

        /* Card titles and text */
        #genesys-support-center [class*="card"] h3,
        #genesys-support-center [class*="card"] [class*="title"] {
            color: #333 !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            margin-bottom: 5px !important;
        }

        #genesys-support-center [class*="card"] p {
            color: #666 !important;
            font-size: 14px !important;
        }

        /* Articles section - white background like Clearwave */
        #genesys-support-center [class*="article"],
        #genesys-support-center [class*="content"]:not([class*="search"]) {
            background: white !important;
            border-radius: 8px !important;
            padding: 40px !important;
            margin: 20px auto !important;
            max-width: 1200px !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05) !important;
        }

        /* Article section titles */
        #genesys-support-center [class*="article"] h2 {
            font-size: 24px !important;
            color: #333 !important;
            margin-bottom: 10px !important;
            font-weight: 600 !important;
        }

        /* Article subtitles */
        #genesys-support-center [class*="article"] p:first-of-type,
        #genesys-support-center [class*="subtitle"] {
            color: #666 !important;
            margin-bottom: 30px !important;
            font-size: 14px !important;
        }

        /* Article list items */
        #genesys-support-center [class*="article"] a,
        #genesys-support-center [class*="list-item"],
        #genesys-support-center [class*="article-item"] {
            padding: 15px 0 !important;
            border-bottom: 1px solid #e1e5e9 !important;
            cursor: pointer !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            text-decoration: none !important;
            color: #333 !important;
            font-size: 14px !important;
        }

        #genesys-support-center [class*="article"] a:hover,
        #genesys-support-center [class*="list-item"]:hover {
            color: #1e5ba8 !important;
        }

        /* Arrow icons in articles */
        #genesys-support-center [class*="arrow"],
        #genesys-support-center [class*="chevron"] {
            color: #999 !important;
            font-size: 16px !important;
        }

        /* Links and buttons - Clearwave blue */
        #genesys-support-center a {
            color: #1e5ba8 !important;
            text-decoration: none !important;
        }

        #genesys-support-center button,
        #genesys-support-center [class*="btn"] {
            background: #1e5ba8 !important;
            color: white !important;
            border: none !important;
            border-radius: 4px !important;
            padding: 10px 20px !important;
            cursor: pointer !important;
            transition: background 0.3s ease !important;
        }

        #genesys-support-center button:hover,
        #genesys-support-center [class*="btn"]:hover {
            background: #174a94 !important;
        }

        /* Chat button styling */
        #genesys-support-center [class*="chat"],
        #genesys-support-center [class*="float"] {
            background: #1e5ba8 !important;
            border-radius: 50% !important;
            box-shadow: 0 4px 20px rgba(30, 91, 168, 0.3) !important;
            color: white !important;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            #genesys-support-center h1 {
                font-size: 32px !important;
            }
            
            #genesys-support-center [class*="grid"],
            #genesys-support-center [class*="category"] {
                grid-template-columns: 1fr !important;
                padding: 20px !important;
            }
            
            #genesys-support-center [class*="article"],
            #genesys-support-center [class*="content"] {
                padding: 20px !important;
                margin: 10px !important;
            }
        }

        /* Override any conflicting background colors */
        #genesys-support-center [style*="background"]:not([class*="hero"]):not([class*="header"]):not([class*="banner"]) {
            background: white !important;
        }

        /* Ensure proper font family throughout */
        #genesys-support-center * {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
        }
    </style>
</head>
<body>
    <!-- Password Protection -->
    <div id="password-screen" style="display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1e5ba8 0%, #2980b9 100%); z-index: 10000; display: flex; align-items: center; justify-content: center;">
        <div style="background: white; padding: 40px; border-radius: 8px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); text-align: center; max-width: 400px; width: 90%;">
            <h2 style="color: #1e5ba8; margin-bottom: 30px; font-weight: 300;">Access Required</h2>
            <p style="color: #666; margin-bottom: 20px;">Please enter the password to access the support center.</p>
            <input type="password" id="password-input" placeholder="Enter password" style="width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; margin-bottom: 20px; outline: none;">
            <button onclick="checkPassword()" style="width: 100%; background: #1e5ba8; color: white; border: none; padding: 15px; border-radius: 4px; font-size: 16px; cursor: pointer;">Access Support Center</button>
            <div id="password-error" style="color: #e74c3c; margin-top: 10px; display: none;">Incorrect password. Please try again.</div>
        </div>
    </div>

    <!-- Main Content (hidden until password verified) -->
    <div id="main-content" style="display: none;">
        <h1>Genesys Widget Debug Page</h1>
        
        <div class="debug-panel" id="debug-log">
            <div>🔍 Starting Genesys widget debugging...</div>
        </div>
    
    <div class="test-buttons">
        <button onclick="testMethod1()">Test Method 1 (Original)</button>
        <button onclick="testMethod2()">Test Method 2 (Alternative CDN)</button>
        <button onclick="testMethod3()">Test Method 3 (Different Environment)</button>
        <button onclick="clearWidget()">Clear Widget</button>
    </div>
    
    <div id="genesys-support-center">
        <div class="placeholder">
            🔄 Waiting for Genesys widget to load...
        </div>
    </div>
    
    <script>
        let debugLog = [];
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            debugLog.push({message: logEntry, type});
            
            const logPanel = document.getElementById('debug-log');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = logEntry;
            logPanel.appendChild(div);
            logPanel.scrollTop = logPanel.scrollHeight;
            
            console.log(logEntry);
        }
        
        function clearWidget() {
            document.getElementById('genesys-support-center').innerHTML = '<div class="placeholder">🔄 Widget cleared. Click a test method to try again.</div>';
            log('Widget cleared', 'info');
        }
        
        function waitForWidget(method) {
            let attempts = 0;
            const maxAttempts = 30;
            
            const checkWidget = () => {
                attempts++;
                const widget = document.querySelector('#genesys-support-center');
                
                if (widget && widget.children.length > 1) {
                    log(`✅ Widget loaded successfully with method ${method}!`, 'success');
                    return;
                }
                
                if (attempts >= maxAttempts) {
                    log(`❌ Widget failed to load after ${maxAttempts} attempts with method ${method}`, 'error');
                    return;
                }
                
                setTimeout(checkWidget, 1000);
            };
            
            setTimeout(checkWidget, 2000);
        }
        
        // Method 1: Original deployment
        function testMethod1() {
            log('🧪 Testing Method 1: Original Genesys deployment', 'info');
            clearWidget();
            
            (function (g, e, n, es, ys) {
                g['_genesysJs'] = e;
                g[e] = g[e] || function () {
                    (g[e].q = g[e].q || []).push(arguments)
                };
                g[e].t = 1 * new Date();
                g[e].c = es;
                ys = document.createElement('script'); 
                ys.async = 1; 
                ys.src = n; 
                ys.charset = 'utf-8';
                
                ys.onload = function() {
                    log('✅ Method 1: Genesys script loaded', 'success');
                };
                
                ys.onerror = function() {
                    log('❌ Method 1: Script failed to load', 'error');
                };
                
                document.head.appendChild(ys);
            })(window, 'Genesys', 'https://apps.usw2.pure.cloud/genesys-bootstrap/genesys.min.js', {
                environment: 'prod-usw2',
                deploymentId: 'f5dcfe55-e3b6-4d5c-bcfb-5d40300125e3'
            });
            
            waitForWidget(1);
        }
        
        // Method 2: Alternative CDN
        function testMethod2() {
            log('🧪 Testing Method 2: Alternative CDN approach', 'info');
            clearWidget();
            
            // Using the standard Genesys Widgets approach
            if(!window._genesys) window._genesys = {};
            if(!window._gt) window._gt = [];
            
            window._genesys.widgets = {
                main: {
                    debug: true,
                    theme: 'light',
                    lang: 'en'
                },
                webchat: {
                    userData: {},
                    autoInvite: {
                        enabled: false
                    }
                }
            };
            
            const script = document.createElement('script');
            script.src = 'https://apps.mypurecloud.com/widgets/9.0/cxbus.min.js';
            script.onload = function() {
                log('✅ Method 2: Alternative script loaded', 'success');
                if (window.CXBus) {
                    window.CXBus.configure({
                        debug: true,
                        pluginsPath: 'https://apps.mypurecloud.com/widgets/9.0/plugins/'
                    });
                }
            };
            script.onerror = function() {
                log('❌ Method 2: Alternative script failed', 'error');
            };
            
            document.head.appendChild(script);
            waitForWidget(2);
        }
        
        // Method 3: Different environment
        function testMethod3() {
            log('🧪 Testing Method 3: Different environment', 'info');
            clearWidget();
            
            (function (g, e, n, es, ys) {
                g['_genesysJs'] = e;
                g[e] = g[e] || function () {
                    (g[e].q = g[e].q || []).push(arguments)
                };
                g[e].t = 1 * new Date();
                g[e].c = es;
                ys = document.createElement('script'); 
                ys.async = 1; 
                ys.src = n; 
                ys.charset = 'utf-8';
                
                ys.onload = function() {
                    log('✅ Method 3: Script loaded', 'success');
                };
                
                ys.onerror = function() {
                    log('❌ Method 3: Script failed to load', 'error');
                };
                
                document.head.appendChild(ys);
            })(window, 'Genesys', 'https://apps.mypurecloud.com/genesys-bootstrap/genesys.min.js', {
                environment: 'mypurecloud.com',
                deploymentId: 'f5dcfe55-e3b6-4d5c-bcfb-5d40300125e3'
            });
            
            waitForWidget(3);
        }
        
        // Check if we're on localhost or need domain fix
        if (location.hostname === 'localhost' || location.hostname.indexOf('.') === -1) {
            log('⚠️ Warning: You may need a proper domain name for Genesys widgets to work', 'error');
        }
        
        // Check for common blocking issues
        log('🔍 Current domain: ' + location.hostname, 'info');
        log('🔍 Protocol: ' + location.protocol, 'info');
        
        
        // Auto-start with method 1 - REMOVED since it now happens after password verification
    </script>
</body>
</html>
